{"remainingRequest":"/home/app/Www/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/app/Www/app/src/components/Context/Message.vue?vue&type=style&index=0&id=cc4dcbf2&scoped=true&lang=css&","dependencies":[{"path":"/home/app/Www/app/src/components/Context/Message.vue","mtime":1583668926703},{"path":"/home/app/Www/app/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/app/Www/app/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/app/Www/app/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/app/Www/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/app/Www/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5tc2cgewogICAgbWFyZ2luLXRvcDogMjBweDsKfQo="},{"version":3,"sources":["Message.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiGA;AACA;AACA","file":"Message.vue","sourceRoot":"src/components/Context","sourcesContent":["<template>\n    <div class=\"mdui-container\">\n        <!--context start-->\n        <div class=\"mdui-row\">\n            <div class=\"msg mdui-col-sm-6 mdui-col-md-4\" v-for=\"msg in messages\" v-bind:key=\"msg.mid\">\n                <div class=\"mdui-card\">\n                    <div class=\"mdui-card-primary\">\n                        <div class=\"mdui-card-primary-title\">{{ msg.title }}</div>\n                        <div class=\"mdui-card-primary-subtitle\">{{ msg.description }}</div>\n                    </div>\n                    <div class=\"mdui-card-content\" v-show=\"msg.showDetail\">{{ msg.content }}</div>\n                    <div class=\"mdui-card-actions\">\n                        <button class=\"mdui-btn mdui-btn-icon mdui-float-right mdui-ripple\" v-on:click=\"showDetailMsg(msg)\"><i class=\"mdui-icon material-icons\">{{ msg.showDetail?'expand_less':'expand_more' }}</i></button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <!--context end-->\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'Message',\n    data() {\n        return {\n            messages: []\n        }\n    },\n    methods: {\n        //显示|隐藏消息的详细信息\n        showDetailMsg: function(msg) {\n            if(msg.showDetail) {\n                msg.showDetail = false\n            }else {\n                msg.showDetail = true\n            }\n            \n        },\n        init: function() {\n            var that = this\n            if(that.isSignIn || that.store.has('uuid')) {\n                that.$.post('https://api.fengjijiao.cn/v1/user/getMessage', {uuid: that.store.get('uuid')}, function(res) {\n                    if(res.status) {\n                        for(var i=0;i<res.data.length;i++) {\n                            var exist = false\n                            //防止消息本体重复\n                            for(var j=0;j<that.messages.length;j++) {\n                                if(that.messages[j].mid == res.data[i].mid) {\n                                    exist = true\n                                    break\n                                }\n                            }\n                            if(exist) continue\n                            that.messages.push({\"mid\":res.data[i].mid,\"title\":res.data[i].title,\"description\":res.data[i].description,\"content\":res.data[i].content,\"showDetail\":false})\n                        }\n                    }else {\n                        that.mdui.dialog({\n                            title: '提示',\n                            content: '无任何消息！',\n                            buttons: [\n                                {\n                                    text: '确认',\n                                    onClick: function() {\n                                        that.$router.push({ path: '/home' })\n                                    }\n                                }\n                            ]\n                        })\n                    }\n                },'json')\n            }else {\n                for(var i=0;i<9;i++) {\n                    that.messages.push({\"mid\":i,\"title\":\"打卡成功\",\"description\":new Date(),\"content\":\"okkkkkkkkkkkkkkkkkkkkk\",\"showDetail\":false})\n                }\n            }\n        }\n    },\n    computed: {\n        isSignIn() {\n            return this.xstore.state.isSignIn\n        }\n    },\n    watch: {\n        'isSignIn': {\n            handler(newValue, oldValue) {\n                console.log(\"isSignIn: newValue\", newValue, \"oldValue\", oldValue)\n                this.init()\n            },\n            immediate: true\n        }\n    }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.msg {\n    margin-top: 20px;\n}\n</style>"]}]}